<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">

    <title>EOS 超级节点投票</title>
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="bootstrap.min.css">

    <script src="js/eosjs-offline.js" type="text/javascript"></script>
    <!-- <script src="js/clipboard.min.js" type="text/javascript"></script> -->

    <script type="text/javascript">

        function signMessage() {

            let unsigned = document.getElementById('unsignd-message').value;
            let jsonUnsigned = JSON.parse(unsigned);

            let chain_id = document.getElementById("chain-id").innerHTML;

            let wif = document.getElementById('private-key').value;
            document.getElementById('private-key').value = "";

            let signed = EosOffline(jsonUnsigned, chain_id, wif);

            document.getElementById('signd-message').innerHTML = signed;

            //清空私钥
            wif = null;
            
        }

    </script>

</head>

<body class="container">
    <div class="text-center">
        <img height=150px src="logo.png">
    </div>
    <h1 class="text-center">EOS 超级节点投票</h1>

    <section id="alerts">
        <div class="alert alert-warning" role="alert">
            此页面可以离线使用，私钥只会在本地用来签名交易，您的私钥不会通过网络传输。安全起见，请关闭所有其他网页，在签名成功，复制报文后请立即关闭此页面。
        </div>
    </section>

    <div class="form-group">
        <label for="eos-chain-id">
            <strong>链ID</strong>
        </label>
        <p id="chain-id" class="form-control">aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906</p>
    </div>

    <div class="form-group">
        <label for="eos-chain-id">
            <strong>未签名报文</strong>
        </label>
        <textarea id="unsignd-message" class="form-control" rows="10"></textarea>
    </div>


    <div class="form-group">
        <label>私钥</label>
        <input id="private-key" class="form-control" placeholder="输入私钥">
    </div>
    </div>


    <div class="form-group">
        <button id="vote" class="btn btn-primary" onclick="signMessage()">点击签名交易报文</button>
    </div>

    <div class="form-group">
        <label for="eos-chain-id">
            <strong>已签名报文</strong>
        </label>
        <textarea id="signd-message" class="form-control" rows="10" readonly=true></textarea>
    </div>

    <div class="form-group">
        <button id="copy" class="btn btn-success" data-clipboard-target="#signd-message">复制已签名报文</button>
    </div>

    <!-- 1、引入相关的 clipboard 文件  -->
    <script src="js/clipboard.min.js"></script>
    <script type="text/javascript">
        // 2、实例化（参数内是要触发事件源对象元素）
        new Clipboard('.btn');
    </script>

</body>

</html>